"use strict";angular.module("objective-fire",["firebase"]),function(a){angular.module("firebase",[]).value("Firebase",a.Firebase).value("firebaseBatchDelay",50)}(window),function(){angular.module("firebase").factory("$firebaseArray",["$log","$firebaseUtils",function(a,b){function c(a){if(!(this instanceof c))return new c(a);var e=this;return this._observers=[],this.$list=[],this._ref=a,this._sync=new d(this),b.assertValidRef(a,"Must pass a valid Firebase reference to $firebaseArray (not a string or URL)"),this._indexCache={},b.getPublicMethods(e,function(a,b){e.$list[b]=a.bind(e)}),this._sync.init(this.$list),this.$list}function d(c){function d(a){if(!p.isDestroyed){p.isDestroyed=!0;var b=c.$ref();b.off("child_added",i),b.off("child_moved",k),b.off("child_changed",j),b.off("child_removed",l),c=null,o(a||"destroyed")}}function e(b){var d=c.$ref();d.on("child_added",i,n),d.on("child_moved",k,n),d.on("child_changed",j,n),d.on("child_removed",l,n),d.once("value",function(c){angular.isArray(c.val())&&a.warn("Storing data using array indices in Firebase can result in unexpected behavior. See https://www.firebase.com/docs/web/guide/understanding-data.html#section-arrays-in-firebase for more information."),o(null,b)},o)}function f(a,b){m||(m=!0,a?g.reject(a):g.resolve(b))}var g=b.defer(),h=b.batch(),i=h(function(a,b){var d=c.$$added(a,b);d&&c.$$process("child_added",d,b)}),j=h(function(a){var d=c.$getRecord(b.getKey(a));if(d){var e=c.$$updated(a);e&&c.$$process("child_changed",d)}}),k=h(function(a,d){var e=c.$getRecord(b.getKey(a));if(e){var f=c.$$moved(a,d);f&&c.$$process("child_moved",e,d)}}),l=h(function(a){var d=c.$getRecord(b.getKey(a));if(d){var e=c.$$removed(a);e&&c.$$process("child_removed",d)}}),m=!1,n=h(function(a){f(a),c.$$error(a)}),o=h(f),p={destroy:d,isDestroyed:!1,init:e,ready:function(){return g.promise}};return p}return c.prototype={$toJSON:function(a){var c;return angular.isObject(a)||(a={$value:a}),c={},b.each(a,function(a,b){c[b]=a}),c},$fromJSON:function(a){return a.val()},$add:function(a){this._assertNotDestroyed("$add");var c=b.defer(),d=this.$ref().ref().push();return d.set(b.toJSON(a,this.$toJSON,this),b.makeNodeResolver(c)),c.promise.then(function(){return d})},$save:function(a){this._assertNotDestroyed("$save");var c=this,d=c._resolveItem(a),e=c.$keyAt(d);if(null!==e){var f=c.$ref().ref().child(e),g=b.toJSON(d,c.$toJSON,c);return b.doSet(f,g).then(function(){return c.$$notify("child_changed",e),f})}return b.reject("Invalid record; could determine key for "+a)},$remove:function(a){this._assertNotDestroyed("$remove");var c=this.$keyAt(a);if(null!==c){var d=this.$ref().ref().child(c);return b.doRemove(d).then(function(){return d})}return b.reject("Invalid record; could not determine key for "+a)},$keyAt:function(a){var b=this._resolveItem(a);return this.$$getKey(b)},$indexFor:function(a){var b=this,c=b._indexCache;if(!c.hasOwnProperty(a)||b.$keyAt(c[a])!==a){var d=b.$list.findIndex(function(c){return b.$$getKey(c)===a});-1!==d&&(c[a]=d)}return c.hasOwnProperty(a)?c[a]:-1},$loaded:function(a,b){var c=this._sync.ready();return arguments.length&&(c=c.then.call(c,a,b)),c},$ref:function(){return this._ref},$watch:function(a,b){var c=this._observers;return c.push([a,b]),function(){var d=c.findIndex(function(c){return c[0]===a&&c[1]===b});d>-1&&c.splice(d,1)}},$destroy:function(b){this._isDestroyed||(this._isDestroyed=!0,this._sync.destroy(b),this.$list.length=0,a.debug("destroy called for FirebaseArray: "+this.$ref().ref().toString()))},$getRecord:function(a){var b=this.$indexFor(a);return b>-1?this.$list[b]:null},$$added:function(a){console.log("recivieng it now");var c=this.$indexFor(b.getKey(a));if(-1===c){var d=this.$fromJSON(a);return angular.isObject(d)||(d={$value:d}),d.$id=b.getKey(a),d.$priority=a.getPriority(),b.applyDefaults(d,this.$$defaults),d}return!1},$$removed:function(a){return this.$indexFor(b.getKey(a))>-1},$$updated:function(a){var c=!1,d=this.$getRecord(b.getKey(a));return angular.isObject(d)&&(c=b.updateRec(d,a,this.$fromJSON,this),b.applyDefaults(d,this.$$defaults)),c},$$moved:function(a){var c=this.$getRecord(b.getKey(a));return angular.isObject(c)?(c.$priority=a.getPriority(),!0):!1},$$error:function(b){a.error(b),this.$destroy(b)},$$getKey:function(a){return angular.isObject(a)?a.$id:null},$$process:function(a,b,c){var d,e=this.$$getKey(b),f=!1;switch(a){case"child_added":d=this.$indexFor(e);break;case"child_moved":d=this.$indexFor(e),this._spliceOut(e);break;case"child_removed":f=null!==this._spliceOut(e);break;case"child_changed":f=!0;break;default:throw new Error("Invalid event type: "+a)}return angular.isDefined(d)&&(f=this._addAfter(b,c)!==d),f&&this.$$notify(a,e,c),f},$$notify:function(a,b,c){var d={event:a,key:b};angular.isDefined(c)&&(d.prevChild=c),angular.forEach(this._observers,function(a){a[0].call(a[1],d)})},_addAfter:function(a,b){var c;return null===b?c=0:(c=this.$indexFor(b)+1,0===c&&(c=this.$list.length)),this.$list.splice(c,0,a),this._indexCache[this.$$getKey(a)]=c,c},_spliceOut:function(a){var b=this.$indexFor(a);return b>-1?(delete this._indexCache[a],this.$list.splice(b,1)[0]):null},_resolveItem:function(a){var b=this.$list;if(angular.isNumber(a)&&a>=0&&b.length>=a)return b[a];if(angular.isObject(a)){var c=this.$$getKey(a),d=this.$getRecord(c);return d===a?d:null}return null},_assertNotDestroyed:function(a){if(this._isDestroyed)throw new Error("Cannot call "+a+" method on a destroyed $firebaseArray object")}},c.$extend=function(a,d){return 1===arguments.length&&angular.isObject(a)&&(d=a,a=function(){return c.apply(this,arguments)}),b.inherit(a,c,d)},c}]),angular.module("firebase").factory("$FirebaseArray",["$log","$firebaseArray",function(a,b){return function(){return a.warn("$FirebaseArray has been renamed. Use $firebaseArray instead."),b.apply(null,arguments)}}])}(),function(){var a;angular.module("firebase").factory("$firebaseAuth",["$q","$firebaseUtils","$log",function(b,c,d){return function(e){var f=new a(b,c,d,e);return f.construct()}}]),a=function(a,b,c,d){if(this._q=a,this._utils=b,this._log=c,"string"==typeof d)throw new Error("Please provide a Firebase reference instead of a URL when creating a `$firebaseAuth` object.");this._ref=d},a.prototype={construct:function(){return this._object={$authWithCustomToken:this.authWithCustomToken.bind(this),$authAnonymously:this.authAnonymously.bind(this),$authWithPassword:this.authWithPassword.bind(this),$authWithOAuthPopup:this.authWithOAuthPopup.bind(this),$authWithOAuthRedirect:this.authWithOAuthRedirect.bind(this),$authWithOAuthToken:this.authWithOAuthToken.bind(this),$unauth:this.unauth.bind(this),$onAuth:this.onAuth.bind(this),$getAuth:this.getAuth.bind(this),$requireAuth:this.requireAuth.bind(this),$waitForAuth:this.waitForAuth.bind(this),$createUser:this.createUser.bind(this),$changePassword:this.changePassword.bind(this),$changeEmail:this.changeEmail.bind(this),$removeUser:this.removeUser.bind(this),$resetPassword:this.resetPassword.bind(this)},this._object},authWithCustomToken:function(a,b){var c=this._q.defer();try{this._ref.authWithCustomToken(a,this._utils.makeNodeResolver(c),b)}catch(d){c.reject(d)}return c.promise},authAnonymously:function(a){var b=this._q.defer();try{this._ref.authAnonymously(this._utils.makeNodeResolver(b),a)}catch(c){b.reject(c)}return b.promise},authWithPassword:function(a,b){var c=this._q.defer();try{this._ref.authWithPassword(a,this._utils.makeNodeResolver(c),b)}catch(d){c.reject(d)}return c.promise},authWithOAuthPopup:function(a,b){var c=this._q.defer();try{this._ref.authWithOAuthPopup(a,this._utils.makeNodeResolver(c),b)}catch(d){c.reject(d)}return c.promise},authWithOAuthRedirect:function(a,b){var c=this._q.defer();try{this._ref.authWithOAuthRedirect(a,this._utils.makeNodeResolver(c),b)}catch(d){c.reject(d)}return c.promise},authWithOAuthToken:function(a,b,c){var d=this._q.defer();try{this._ref.authWithOAuthToken(a,b,this._utils.makeNodeResolver(d),c)}catch(e){d.reject(e)}return d.promise},unauth:function(){null!==this.getAuth()&&this._ref.unauth()},onAuth:function(a,b){var c=this,d=this._utils.debounce(a,b,0);return this._ref.onAuth(d),function(){c._ref.offAuth(d)}},getAuth:function(){return this._ref.getAuth()},_routerMethodOnAuthPromise:function(a){var b=this._ref;return this._utils.promise(function(c,d){function e(f){return b.offAuth(e),null!==f?void c(f):a?void d("AUTH_REQUIRED"):void c(null)}b.onAuth(e)})},requireAuth:function(){return this._routerMethodOnAuthPromise(!0)},waitForAuth:function(){return this._routerMethodOnAuthPromise(!1)},createUser:function(a){var b=this._q.defer();if("string"==typeof a)throw new Error("$createUser() expects an object containing 'email' and 'password', but got a string.");try{this._ref.createUser(a,this._utils.makeNodeResolver(b))}catch(c){b.reject(c)}return b.promise},changePassword:function(a){var b=this._q.defer();if("string"==typeof a)throw new Error("$changePassword() expects an object containing 'email', 'oldPassword', and 'newPassword', but got a string.");try{this._ref.changePassword(a,this._utils.makeNodeResolver(b))}catch(c){b.reject(c)}return b.promise},changeEmail:function(a){if("function"!=typeof this._ref.changeEmail)throw new Error("$changeEmail() expects an object containing 'oldEmail', 'newEmail', and 'password', but got a string.");var b=this._q.defer();try{this._ref.changeEmail(a,this._utils.makeNodeResolver(b))}catch(c){b.reject(c)}return b.promise},removeUser:function(a){var b=this._q.defer();if("string"==typeof a)throw new Error("$removeUser() expects an object containing 'email' and 'password', but got a string.");try{this._ref.removeUser(a,this._utils.makeNodeResolver(b))}catch(c){b.reject(c)}return b.promise},resetPassword:function(a){var b=this._q.defer();if("string"==typeof a)throw new Error("$resetPassword() expects an object containing 'email', but got a string.");try{this._ref.resetPassword(a,this._utils.makeNodeResolver(b))}catch(c){b.reject(c)}return b.promise}}}(),function(){angular.module("firebase").factory("$firebaseObject",["$parse","$firebaseUtils","$log",function(a,b,c){function d(a){return this instanceof d?(this.$$conf={sync:new f(this,a),ref:a,binding:new e(this),listeners:[]},Object.defineProperty(this,"$$conf",{value:this.$$conf}),this.$id=b.getKey(a.ref()),this.$priority=null,b.applyDefaults(this,this.$$defaults),void this.$$conf.sync.init()):new d(a)}function e(a){this.subs=[],this.scope=null,this.key=null,this.rec=a}function f(a,d){function e(b){n.isDestroyed||(n.isDestroyed=!0,d.off("value",k),a=null,m(b||"destroyed"))}function f(){d.on("value",k,l),d.once("value",function(a){angular.isArray(a.val())&&c.warn("Storing data using array indices in Firebase can result in unexpected behavior. See https://www.firebase.com/docs/web/guide/understanding-data.html#section-arrays-in-firebase for more information. Also note that you probably wanted $firebaseArray and not $firebaseObject."),m(null)},m)}function g(b){h||(h=!0,b?i.reject(b):i.resolve(a))}var h=!1,i=b.defer(),j=b.batch(),k=j(function(b){var c=a.$$updated(b);c&&a.$$notify()}),l=j(a.$$error,a),m=j(g),n={isDestroyed:!1,destroy:e,init:f,ready:function(){return i.promise}};return n}return d.prototype={$toJSON:function(a){var c;return angular.isObject(a)||(a={$value:a}),c={},b.each(a,function(a,b){c[b]=a}),c},$fromJSON:function(a){return a.val()},$save:function(){var a=this,c=a.$ref(),d=b.toJSON(a,a.$toJSON,a);return b.doSet(c,d).then(function(){return a.$$notify(),a.$ref()})},$remove:function(){var a=this;return b.trimKeys(a,{}),a.$value=null,b.doRemove(a.$ref()).then(function(){return a.$$notify(),a.$ref()})},$loaded:function(a,b){var c=this.$$conf.sync.ready();return arguments.length&&(c=c.then.call(c,a,b)),c},$ref:function(){return this.$$conf.ref},$bindTo:function(a,b){var c=this;return c.$loaded().then(function(){return c.$$conf.binding.bindTo(a,b)})},$watch:function(a,b){var c=this.$$conf.listeners;return c.push([a,b]),function(){var d=c.findIndex(function(c){return c[0]===a&&c[1]===b});d>-1&&c.splice(d,1)}},$destroy:function(a){var c=this;c.$isDestroyed||(c.$isDestroyed=!0,c.$$conf.sync.destroy(a),c.$$conf.binding.destroy(),b.each(c,function(a,b){delete c[b]}))},$$updated:function(a){var c=b.updateRec(this,a,this.$fromJSON,this);return b.applyDefaults(this,this.$$defaults),c},$$error:function(a){c.error(a),this.$destroy(a)},$$scopeUpdated:function(a){var c=b.defer();return this.$ref().set(b.toJSON(a,this.$toJSON,this),b.makeNodeResolver(c)),c.promise},$$notify:function(){var a=this,b=this.$$conf.listeners.slice();angular.forEach(b,function(b){b[0].call(b[1],{event:"value",key:a.$id})})},forEach:function(a,c){return b.each(this,a,c)}},d.$extend=function(a,c){return 1===arguments.length&&angular.isObject(a)&&(c=a,a=function(){d.apply(this,arguments)}),b.inherit(a,d,c)},e.prototype={assertNotBound:function(a){if(this.scope){var d="Cannot bind to "+a+" because this instance is already bound to "+this.key+"; one binding per instance (call unbind method or create another FirebaseObject instance)";return c.error(d),b.reject(d)}},bindTo:function(c,d){function e(e){function f(a){return angular.equals(a,k)&&a.$priority===k.$priority&&a.$value===k.$value}function g(a){j.assign(c,b.scopeData(a))}function h(){var a=j(c);return[a,a.$priority,a.$value]}var i=!1,j=a(d),k=e.rec;e.scope=c,e.varName=d;var l=b.debounce(function(a){var d=b.scopeData(a);k.$$scopeUpdated(d)["finally"](function(){i=!1,d.hasOwnProperty("$value")||(delete k.$value,delete j(c).$value)})},50,500),m=function(a){a=a[0],f(a)||(i=!0,l(a))},n=function(){i||f(j(c))||g(k)};return g(k),e.subs.push(c.$on("$destroy",e.unbind.bind(e))),e.subs.push(c.$watch(h,m,!0)),e.subs.push(k.$watch(n)),e.unbind.bind(e)}return this.assertNotBound(d)||e(this)},unbind:function(){this.scope&&(angular.forEach(this.subs,function(a){a()}),this.subs=[],this.scope=null,this.key=null)},destroy:function(){this.unbind(),this.rec=null}},d}]),angular.module("firebase").factory("$FirebaseObject",["$log","$firebaseObject",function(a,b){return function(){return a.warn("$FirebaseObject has been renamed. Use $firebaseObject instead."),b.apply(null,arguments)}}])}(),function(){angular.module("firebase").factory("$firebase",function(){return function(){throw new Error("$firebase has been removed. You may instantiate $firebaseArray and $firebaseObject directly now. For simple write operations, just use the Firebase ref directly. See the AngularFire 1.0.0 changelog for details: https://www.firebase.com/docs/web/libraries/angular/changelog.html")}})}(),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){if(void 0===this||null===this)throw new TypeError("'this' is null or not defined");var c=this.length>>>0;for(b=+b||0,1/0===Math.abs(b)&&(b=0),0>b&&(b+=c,0>b&&(b=0));c>b;b++)if(this[b]===a)return b;return-1}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{enumerable:!1,configurable:!0,writable:!0,value:function(a){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;d>f;f++)if(f in c&&(b=c[f],a.call(e,b,f,c)))return f;return-1}}),"function"!=typeof Object.create&&!function(){var a=function(){};Object.create=function(b){if(arguments.length>1)throw new Error("Second argument not supported");if(null===b)throw new Error("Cannot set a null [[Prototype]]");if("object"!=typeof b)throw new TypeError("Argument must be an object");return a.prototype=b,new a}}(),Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;d>g;g++)a.call(e,c[g])&&h.push(c[g]);return h}}()),"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"test".__proto__?function(a){return a.__proto__}:function(a){return a.constructor.prototype}),function(){angular.module("firebase").factory("$firebaseConfig",["$firebaseArray","$firebaseObject","$injector",function(a,b,c){return function(d){var e=angular.extend({},d);return"string"==typeof e.objectFactory&&(e.objectFactory=c.get(e.objectFactory)),"string"==typeof e.arrayFactory&&(e.arrayFactory=c.get(e.arrayFactory)),angular.extend({arrayFactory:a,objectFactory:b},e)}}]).factory("$firebaseUtils",["$q","$timeout","firebaseBatchDelay",function(a,b,c){function d(b){function c(a){e.resolve(a)}function d(a){e.reject(a)}if(!angular.isFunction(b))throw new Error("missing resolver function");var e=a.defer();return b(c,d),e.promise}var e={batch:function(a,b){function d(a,b){if("function"!=typeof a)throw new Error("Must provide a function to be batched. Got "+a);return function(){var c=Array.prototype.slice.call(arguments,0);k.push([a,b,c]),f()}}function f(){i&&(i(),i=null),h&&Date.now()-h>b?j||(j=!0,e.compile(g)):(h||(h=Date.now()),i=e.wait(g,a))}function g(){i=null,h=null,j=!1;var a=k.slice(0);k=[],angular.forEach(a,function(a){a[0].apply(a[1],a[2])})}a=c,b||(b=10*a||100);var h,i,j,k=[];return d},debounce:function(a,b,c,d){function f(){j&&(j(),j=null),i&&Date.now()-i>d?l||(l=!0,e.compile(g)):(i||(i=Date.now()),j=e.wait(g,c))}function g(){j=null,i=null,l=!1,a.apply(b,k)}function h(){k=Array.prototype.slice.call(arguments,0),f()}var i,j,k,l;if("number"==typeof b&&(d=c,c=b,b=null),"number"!=typeof c)throw new Error("Must provide a valid integer for wait. Try 0 for a default");if("function"!=typeof a)throw new Error("Must provide a valid function to debounce");return d||(d=10*c||100),h.running=function(){return i>0},h},assertValidRef:function(a,b){if(!angular.isObject(a)||"function"!=typeof a.ref||"function"!=typeof a.ref().transaction)throw new Error(b||"Invalid Firebase reference")},inherit:function(a,b,c){var d=a.prototype;return a.prototype=Object.create(b.prototype),a.prototype.constructor=a,angular.forEach(Object.keys(d),function(b){a.prototype[b]=d[b]}),angular.isObject(c)&&angular.extend(a.prototype,c),a},getPrototypeMethods:function(a,b,c){for(var d={},e=Object.getPrototypeOf({}),f=angular.isFunction(a)&&angular.isObject(a.prototype)?a.prototype:Object.getPrototypeOf(a);f&&f!==e;){for(var g in f)f.hasOwnProperty(g)&&!d.hasOwnProperty(g)&&(d[g]=!0,b.call(c,f[g],g,f));f=Object.getPrototypeOf(f)}},getPublicMethods:function(a,b,c){e.getPrototypeMethods(a,function(a,d){"function"==typeof a&&"_"!==d.charAt(0)&&b.call(c,a,d)})},defer:a.defer,reject:a.reject,resolve:a.when,promise:angular.isFunction(a)?a:d,makeNodeResolver:function(a){return function(b,c){null===b?(arguments.length>2&&(c=Array.prototype.slice.call(arguments,1)),a.resolve(c)):a.reject(b)}},wait:function(a,c){var d=b(a,c||0);return function(){d&&(b.cancel(d),d=null)}},compile:function(a){return b(a||function(){})},deepCopy:function(a){if(!angular.isObject(a))return a;var b=angular.isArray(a)?a.slice():angular.extend({},a);for(var c in b)b.hasOwnProperty(c)&&angular.isObject(b[c])&&(b[c]=e.deepCopy(b[c]));return b},trimKeys:function(a,b){e.each(a,function(c,d){b.hasOwnProperty(d)||delete a[d]})},scopeData:function(a){var b={$id:a.$id,$priority:a.$priority},c=!1;return e.each(a,function(a,d){c=!0,b[d]=e.deepCopy(a)}),!c&&a.hasOwnProperty("$value")&&(b.$value=a.$value),b},updateRec:function(a,b,c,d){var f=b.val(),g=angular.extend({},a);return angular.isFunction(c)&&(f=c.apply(d,[b])),angular.isObject(f)?delete a.$value:(a.$value=f,f={}),e.trimKeys(a,f),angular.extend(a,f),a.$priority=b.getPriority(),!angular.equals(g,a)||g.$value!==a.$value||g.$priority!==a.$priority},applyDefaults:function(a,b){return angular.isObject(b)&&angular.forEach(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)}),a},dataKeys:function(a){var b=[];return e.each(a,function(a,c){b.push(c)}),b},each:function(a,b,c){if(angular.isObject(a)){for(var d in a)if(a.hasOwnProperty(d)){var e=d.charAt(0);"_"!==e&&"$"!==e&&"."!==e&&b.call(c,a[d],d,a)}}else if(angular.isArray(a))for(var f=0,g=a.length;g>f;f++)b.call(c,a[f],f,a);return a},getKey:function(a){return"function"==typeof a.key?a.key():a.name()},toJSON:function(a,b,c){var d=b.apply(c,[a]);return angular.isObject(d)||(a={$value:d},d={}),angular.isDefined(a.$value)&&0===Object.keys(d).length&&null!==a.$value&&(d[".value"]=a.$value),angular.isDefined(a.$priority)&&Object.keys(d).length>0&&null!==a.$priority&&(d[".priority"]=a.$priority),angular.forEach(d,function(c,e){if(e.match(/[.$\[\]#\/]/)&&".value"!==e&&".priority"!==e)throw new Error("Invalid key "+e+" (cannot contain .$[]#)");if(angular.isUndefined(c))throw console.log(d),console.log(a),console.log(b),new Error("Key "+e+" was undefined. Cannot pass undefined in JSON. Use null instead.")}),d},doSet:function(a,b){var c=e.defer();if(angular.isFunction(a.set)||!angular.isObject(b))a.set(b,e.makeNodeResolver(c));else{var d=angular.extend({},b);a.once("value",function(b){b.forEach(function(a){d.hasOwnProperty(e.getKey(a))||(d[e.getKey(a)]=null)}),a.ref().update(d,e.makeNodeResolver(c))},function(a){c.reject(a)})}return c.promise},doRemove:function(a){var b=e.defer();return angular.isFunction(a.remove)?a.remove(e.makeNodeResolver(b)):a.once("value",function(c){var d=[];c.forEach(function(a){var c=e.defer();d.push(c.promise),a.ref().remove(e.makeNodeResolver(b))}),e.allPromises(d).then(function(){b.resolve(a)},function(a){b.reject(a)})},function(a){b.reject(a)}),b.promise},VERSION:"0.0.0",batchDelay:c,allPromises:a.all.bind(a)};return e}])}(),angular.module("objective-fire").factory("Factories",["$firebaseObject","$firebaseArray","$q",function(a,b,c){var d={objectFactory:function(b,e,f){var g={};g._objectClass=b,g._rootRef=e,g._objFire=f;var h=b.objectMethods;for(var i in h)h.hasOwnProperty(i)&&(g[i]=h[i]);return g.$load=function(a){var b=this._objectClass.properties,e=b.objectP,g=b.arrayP,h=c.defer();if("string"!=typeof a)throw"name must be of type string";if(this._doLoad[a])h.resolve(this[a]);else{var i,j,k="";for(j=0;j<e.length;j++)if(e[j].name===a){i=e[j],k="op";break}for(j=0;j<g.length;j++)if(g[j].name===a){i=g[j],k="oap";break}this._doLoad[a]=!0;var l,m;if(this._loaded){if("op"===k){l=i.objectClassName,m=f.getByName(l);var n=m.instance(this[a]);this[a]=n,this._isLoaded[a]=!0,h.resolve(this[a])}else if("oap"===k){l=i.objectClassName,m=f.getByName(l);var o=d.arrayFactory(m),p=new o(this._rootRef.child(this._objectClass.name).child(this.$id).child(a));this[a]=p,this._isLoaded[a]=!0,h.resolve(this[a])}}else this.$loaded().then(function(b){if(!b._isLoaded[a])if("op"===k){l=i.objectClassName,m=f.getByName(l);var c=m.instance(b[a]);b[a]=c}else if("oap"===k){l=i.objectClassName,m=f.getByName(l);var e=d.arrayFactory(m),g=new e(this._rootRef.child(this._objectClass.name).child(this.$id).child(a));b[a]=g}b._isLoaded[a]=!0,h.resolve(b[a])})}return h.promise},g.$toJSON=function(a){var b,c,d=this._objectClass.properties,e=d.primitive,f=d.objectP,g=d.arrayP,h={};for(b=0;b<e.length;b++)c=e[b].name,h[c]=a[c];for(b=0;b<f.length;b++)c=f[b].name,h[c]="object"==typeof a[c]?a[c].$id:a[c];for(b=0;b<g.length;b++)if(c=g[b].name,"object"==typeof a[c]){h[c]=[];for(var i=0;i<a[c].length;i++)h[c][i]=a[c][i].$id}else h[c]=a[c];for(var j in h)void 0===h[j]&&(h[j]=null);return h},g.$fromJSON=function(a){var b=this._objectClass.properties,c=b.primitive,e=b.objectP,f=b.arrayP,g=a.val();null===g&&(g={});var h,i,j={};for(h=0;h<c.length;h++)i=c[h].name,j[i]=g[i];var k,l;for(h=0;h<e.length;h++)if(i=e[h].name,this._doLoad[i])if(this[i]&&this[i].$id===g[i])j[i]=this[i];else{k=e[h].objectClassName,l=this._objFire.getByName(k);var m=l.instance(g[i]);this._isLoaded[i]=!0,j[i]=m}else j[i]=g[i];for(h=0;h<f.length;h++)if(i=f[h].name,this._doLoad[i])if(this._isLoaded[i])j[i]=this[i];else{k=f[h].objectClassName,l=this._objFire.getByName(k);var n=d.arrayFactory(l),o=new n(this._rootRef.child(this._objectClass.name).child(this.$id).child(i));this._isLoaded[i]=!0,j[i]=o}else j[i]=g[i];return j},a.$extend(g)},arrayFactory:function(a){return b.$extend({_fireObject:a,$toJSON:function(a){return a.$id?a.$id:null},$fromJSON:function(a){var b=this._fireObject.instance(a.val());return b}})}};return d}]),angular.module("objective-fire").factory("FireObject",["Factories",function(a){function b(b,c,d){if("object"!=typeof b)throw"objectClass must be of type ObjectClass";this.objectClass=b,this.rootRef=c,this.objFire=d,this.Factory=a.objectFactory(b,c,d)}return b.prototype["new"]=function(){var a=this.rootRef.child(this.objectClass.name).push(),b=new this.Factory(a);if(b._loaded=!1,b.$loaded().then(function(){b._loaded=!0}),b._isLoaded={},b._doLoad={},null===this.objectClass.objectConstructor||"function"!=typeof this.objectClass.objectConstructor)throw"new may only be called for classes that have constructors";this.objectClass.objectConstructor.apply(b,arguments);var c,d,e=this.objectClass.properties,f=e.objectP,g=e.arrayP;for(c=0;c<f.length;c++)d=f[c].name,d in b&&(b._isLoaded[d]=!0,b._doLoad[d]=!0);for(c=0;c<g.length;c++)d=g[c].name,d in b&&(b._isLoaded[d]=!0,b._doLoad[d]=!0);return b.$save(),b},b.prototype.instance=function(a){var b=this.rootRef.child(this.objectClass.name).child(a),c=Array.prototype.slice.call(arguments,[1]),d=new this.Factory(b);d._loaded=!1,d.$loaded().then(function(){d._loaded=!0}),d._isLoaded={},d._doLoad={};for(var e=0;e<c.length;e++){if("string"!=typeof c[e])throw"typeof properties to load must be string";d._doLoad[c[e]]=!0}return d},b}]),angular.module("objective-fire").factory("ObjectClass",function(){function a(b,c,d,e){if(4!==arguments.length)throw"ObjectClass constructor may only be invoked with all parameters defined";if(!this instanceof a)return new a(b,c,d,e);if("string"!=typeof b)throw"name must be of type string";if("function"!=typeof c&&null!==c)throw"objectConstructor must be of type function or null";if("object"!=typeof d&&null!==d)throw"objectMethods must be of type object or null";if("object"!=typeof e||null===e)throw"properties must be of type object or null";this.name=b,this.objectConstructor=c,this.objectMethods=d,this.properties=e}return a}),angular.module("objective-fire").factory("ObjectiveFire",["FireObject",function(a,b,c){function d(a){return!this instanceof d?new d(a):(this.ref=a,void(this.objects={}))}return d.prototype={registerFromObjectClass:function(b){return this.objects[b.name]=new a(b,this.ref,this),this},registerFromObject:function(a){var d=new b;for(var e in a.properties)if(a.properties.hasOwnProperty(e)){var f=a.properties[e],g=f.type;"primitive"===g?d.addPrimitiveProperty(f.name):"object"===g?d.addObjectProperty(f.name,f.objectClassName):"objectArray"===g&&d.addObjectArrayProperty(f.name,f.objectClassName)}var h=new c(a.name,a.objectConstructor,a.objectMethods,d);return this.objects[a.name]=h,h},getByName:function(a){return this.objects[a]}},d}]),angular.module("objective-fire").factory("ObjectProperty",function(){function a(b,c){if(!this instanceof a)return new a(b,c);if("string"!=typeof b)throw"name must be of type string";this.name=b,this.objectClassName=c}return a}).factory("ObjectArrayProperty",function(){function a(b,c){if(!this instanceof a)return new a(b,c);if("string"!=typeof b)throw"name must be of type string";this.name=b,this.objectClassName=c}return a}).factory("PrimitiveProperty",function(){function a(b){if(!this instanceof a)return new a(b);if("string"!=typeof b)throw"name must be of type string";this.name=b}return a}).factory("Properties",["PrimitiveProperty","ObjectProperty","ObjectArrayProperty",function(a,b,c){function d(){return!this instanceof d?new d:(this.primitive=[],this.objectP=[],void(this.arrayP=[]))}return d.prototype={addProperty:function(d){if(d instanceof a)this.primitive.push(d);else if(d instanceof b)this.objectP.push(d);else{if(!(d instanceof c))throw"property must be of type PrimitiveProperty || ObjectProperty || ObjectArrayProperty";this.arrayP.push(d)}return this},addPrimitiveProperty:function(b){return this.primitive.push(new a(b)),this},addObjectProperty:function(a,c){return this.objectP.push(new b(a,c)),this},addObjectArrayProperty:function(a,b){return this.arrayP.push(new c(a,b)),this}},d}]);